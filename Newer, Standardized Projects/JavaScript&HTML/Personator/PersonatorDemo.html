<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <title>Personator Demo</title>	
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.css"/>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.js"></script>
    <style>
        .header img {
            float: right;
            width: 188px;
            height: 80px;
            background: #555;
        }

        .header h2 {
            position: relative;
            top: 18px;
            left: 10px;
        }
    </style>
</head>
<body class="ui container">
    <p>	
    <div class="header">
        <img src="melissa-global-intelligence.jpg" width="188" height="80" alt="logo" />
        <h2 class="ui header">Personator Demo</h2>		
		<br>
    </div>	
	<br>
	<div class="wiki">
		
	</div>
    <div class="main ui container">	
        <div class="ui top attached tabular menu">
            <a class="item active" data-tab="tab-name">Input</a>
			<a class="item" data-tab="tab-name3">Request</a>
            <a class="item" data-tab="tab-name2">Output</a>
        </div>
        <!-- Input tab -->
        <div class="ui bottom attached tab segment active" data-tab="tab-name">
            <div class="ui two column stackable grid container">
                <div class="column">
				<a href="http://wiki.melissadata.com/index.php?title=Personator">Personator Wiki</a>
                    <!-- License Key -->
                    <div class="ui info message">					
                        <div class="header">
                            License Key
                        </div>
                        Enter here your encrypted and unique license key from Melissa Data. This is necessary for including with each request to the web service. If you do not have a license key, please contact your Melissa Data sales representative at 1-800-MELISSA (1-800-635-4772)
                    </div>
                    <div class="ui input right fluid field">
                        <input type="text" placeholder="License Key..." name="id">
                    </div>
                    <!-- Actions -->
                    <div class="ui info message">                    
                        <div class="header">
                            Actions
                        </div>
                        <ul class="list">
                            <li>Check - Validates the individual input data pieces for validity and corrects them if possible</li>
                            <li>Verify - Returns any found correlations between your different input data pieces</li>
                            <li>Append - Returns elements based on the selected point of centricity</li>
                            <li>Move - Returns the latest address for an individual or business if a previous address was entered</li>
                        </ul>
                    </div>
                    <div class="ui two column stackable grid container">
                        <div class="column">
                            <div class="ui checkbox">
                                <input type="checkbox" name="actionCheck"> 
                                <label>Check</label>
                            </div>
                            <br>
                           <div class="ui checkbox">
                                <input type="checkbox" name="actionVerify"> 
                                <label>Verify</label>
                            </div>
                            <br>
                        </div>
                        <div class="column">
                            <div class="ui checkbox">
                                <input type="checkbox" name="actionAppend">   
                                <label>Append</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="actionMove"> 
                                <label>Move</label>
                            </div>
                            <br>
                        </div>
                    </div>
                    <!-- Column Responses -->
                    <div class="ui info message">
                        <div class="header">
                            Column Responses
                        </div>
                        <ul class="list">
                            <li>Group Address Details - Returns detailed address information, including Address Type Code and Carrier Route</li>
                            <li>Group Census - Returns detailed census information, including CBSA Code and Congressional District</li>
                            <li>Group Geocode - Returns the geocoded latitude and longitude</li>
                            <li>Group Demographic Basic (Premium package) - Returns detailed Demographic information, including Household Income and Political Party</li>
                            <li>For further column descriptions, please refer <a href="http://wiki.melissadata.com/index.php?title=Personator%3AOutput_Columns">here</a></li>
                        </ul>
                    </div>
					<div class="ui two column stackable grid container">
						<div class="column">
                            <div class="ui checkbox">
                                <input id='selectAll' type="checkbox" name="selectAllCheckbox"> 
                                <label>Select All</label>
                            </div>
                            <br>
                            <br>
						   <div class="ui checkbox">
								<input type="checkbox" name="moveDateCheckbox"> 
								<label>Move Date</label>
							</div>
							<br>
							<div class="ui checkbox">
								<input type="checkbox" name="occupationCheckbox">   
								<label>Occupation</label>
							</div>
							<br>
							<div class="ui checkbox">
								<input type="checkbox" name="ownRentCheckbox"> 
								<label>Own Rent</label>
							</div>
							<br>
							<div class="ui checkbox">
								<input type="checkbox" name="phoneCountryCodeCheckbox"> 
								<label>Phone Country Code</label>
							</div>
							<br>	
                            <div class="ui checkbox">
                                <input type="checkbox" name="phoneCountryNameCheckbox"> 
                                <label>Phone Country Name</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="plus4Checkbox"> 
                                <label>Plus4</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="privateMailboxCheckbox"> 
                                <label>Private Mailbox</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="suiteCheckbox">
                                <label>Suite</label>
                            </div>
                            <br>					
						</div>
						<div class="column">
							<div class="ui checkbox">
								<input type="checkbox" name="grpAddressDetailsCheckbox"> 
								<label>Group Address Details</label>
							</div>
							<br>
							<div class="ui checkbox">
								<input type="checkbox" name="grpCensusCheckbox">
								<label>Group Census</label>
							</div>
							<br>
							<div class="ui checkbox">
								<input type="checkbox" name="grpCensus2Checkbox">  
								<label>Group Census 2</label>
							</div>
							<br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="grpGeocodeCheckbox"> 
                                <label>Group Geocode</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="grpDemographicBasicCheckbox"> 
                                <label>Group Demographics Basic</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="grpIPAddressCheckbox"> 
                                <label>Group IP Address</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="grpNameDetailsCheckbox"> 
                                <label>Group Name Details</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="grpParsedAddressCheckbox"> 
                                <label>Group Parsed Address</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="grpParsedEmailCheckbox"> 
                                <label>Group Parsed Email</label>
                            </div>
                            <br>
                            <div class="ui checkbox">
                                <input type="checkbox" name="grpParsedPhoneCheckbox"> 
                                <label>Group Parsed Phone</label>
                            </div>
                            <br>
						</div>
					</div>
                    <div class="ui info message">
                        <div class="header">
                            Verification and Appending Options
                        </div>
                        <ul class="list">
                            <li>Centric Hint - Determines the primary point of reference to use. When set to Auto, it first uses Address if available, followed by Phone if no Address is available, and lastly Email if neither Address nor Phone are available</li>
                            <li>Append - Determines whether to return information. When set to blank, it returns information only when the input field is blank. Check Error returns information when there are errors in the input</li>
                        </ul>
                    </div>
                    <div class="ui two column stackable grid container">
                        <div class="column">
                            <div class="ui selection dropdown">
                                <input type="hidden" name="optAppend_CentricHint">
                                <i class="dropdown icon"></i>
                                <div class="default text">Centric Hint</div>
                                <div class="menu">
                                    <div class="item" data-value="auto">Auto</div>
                                    <div class="item" data-value="address">Address</div>
                                    <div class="item" data-value="phone">Phone</div>
                                    <div class="item" data-value="email">Email</div>
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <div class="ui selection dropdown">
                                <input type="hidden" name="optAppend_Append">
                                <i class="dropdown icon"></i>
                                <div class="default text">Append</div>
                                <div class="menu">
                                    <div class="item" data-value="blank">Blank</div>
                                    <div class="item" data-value="checkerror">Check Error</div>
                                    <div class="item" data-value="always">Always</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column">
					<h1>Personal Identity Information</h1>

                    <h4>Name</h4>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="First Name..." name="first">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Last Name..." name="last">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Full Name..." name="full">
                    </div>

					<h4>Address</h4>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Address1..." name="a1">
                    </div>
                    <p>
					<div class="ui input right fluid">
                        <input type="text" placeholder="Address2..." name="a2">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="City/Locality..." name="city">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="State/Administrative Area..." name="state">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Zip/Postal Code..." name="postal">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Country..." name="ctry">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Last Line (City, State, and Zip)..." name="lastline">
                    </div>

					<h4>Birthdate and SSN</h4>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Birth Day (DD)..." name="bday">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Birth Month (MM)..." name="bmo">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Birth Year (YYYY)..." name="byr">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Social Security Number (Full or Last 4 Digits)..." name="ss">
                    </div>

                    <h4>Other</h4>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Company Name..." name="comp">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Phone Number..." name="phone">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Email..." name="email">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="IP Address..." name="ip">
                    </div>
                    <p>
                    <div class="ui input right fluid">
                        <input type="text" placeholder="Melissa Address Key..." name="mak">
                    </div>

                    <h4>Free Form Input</h4>
                    <div class="ui info message">
                    <p>Accepts delimited or undelimited free form input. This will be parsed by the service</p>
                    </div>
                    <p>
                    <div class="ui form">
                        <textarea name="ff" rows="5" placeholder="Free Form Input..."></textarea>                           
                    </div>
                    <br>
                    <br>
                    <button class="ui icon button normal" onclick="doClear()">
                        <i class="erase icon"></i>
                        Clear
                    </button>
                    <button class="ui icon button positive" onclick="doVerify()">
                        <i class="thumbs up icon"></i>
                        Send Request
                    </button>
                </div>
            </div>
        </div>

		<!-- REST tab -->
        <div class="ui bottom attached tab segment" data-tab="tab-name3">
            <pre name="restOutput">
                Run a record through first
            </pre>
        </div>
		
        <!-- Output tab -->
        <div class="ui bottom attached tab segment" data-tab="tab-name2">
            <pre name="jsonOutput">
                Run a record through first
            </pre>
        </div>
        <p><br>
    </div>

    <script>
        $('.menu .item').tab();
        $('.ui.dropdown').dropdown();

        $('#selectAll').change(function () {
            if ($(this).prop('checked')) {
               $('input').prop('checked', true);
            } else {
                $('input').prop('checked', false);
            }
        });
        $('#selectAll').trigger('change');

        function getColumnResponses() {
            var columnResponses = "";
            if ($('input[name=moveDateCheckbox]').is(':checked')) columnResponses += "MoveDate,";
            if ($('input[name=occupationCheckbox]').is(':checked')) columnResponses += "Occupation,";
			if ($('input[name=ownRentCheckbox]').is(':checked')) columnResponses += "OwnRent,";
			if ($('input[name=phoneCountryCodeCheckbox]').is(':checked')) columnResponses += "PhoneCountryCode,";
			if ($('input[name=phoneCountryNameCheckbox]').is(':checked')) columnResponses += "PhoneCountryName,";
			if ($('input[name=plus4Checkbox]').is(':checked')) columnResponses += "Plus4,";
			if ($('input[name=privateMailboxCheckbox]').is(':checked')) columnResponses += "PrivateMailBox,";
            if ($('input[name=suiteCheckbox]').is(':checked')) columnResponses += "Suite,";
            if ($('input[name=grpAddressDetailsCheckbox]').is(':checked')) columnResponses += "GrpAddressDetails,";
            if ($('input[name=grpCensusCheckbox]').is(':checked')) columnResponses += "GrpCensus,";
            if ($('input[name=grpCensus2Checkbox]').is(':checked')) columnResponses += "GrpCensus2,";
            if ($('input[name=grpGeocodeCheckbox]').is(':checked')) columnResponses += "GrpGeocode,";
            if ($('input[name=grpDemographicBasicCheckbox]').is(':checked')) columnResponses += "GrpDemographicBasic,";
            if ($('input[name=grpIPAddressCheckbox]').is(':checked')) columnResponses += "GrpIPAddress,";
            if ($('input[name=grpNameDetailsCheckbox]').is(':checked')) columnResponses += "GrpNameDetails,";
            if ($('input[name=grpParsedAddressCheckbox]').is(':checked')) columnResponses += "GrpParsedAddress,";
            if ($('input[name=grpParsedEmailCheckbox]').is(':checked')) columnResponses += "GrpParsedEmail,";
            if ($('input[name=grpParsedPhoneCheckbox]').is(':checked')) columnResponses += "GrpParsedPhone,";
            return columnResponses;
        }

        function getActions() {
            var actions = "";

            if ($('input[name=actionCheck]').is(':checked')) actions += "Check,";
            if ($('input[name=actionVerify]').is(':checked')) actions += "Verify,";
            if ($('input[name=actionAppend]').is(':checked')) actions += "Append,";
            if ($('input[name=actionMove]').is(':checked')) actions += "Move,";
            return actions;
        }

        function getOpt() {
            var opt = "";
            if ($('input[name=optAppend_CentricHint]').val() != "") opt += "CentricHint:" + $('input[name=optAppend_CentricHint]').val() + ",";
            if ($('input[name=optAppend_Append]').val() != "") opt += "Append:" + $('input[name=optAppend_Append]').val() + ",";            
            return opt;
        }

		function getUserInput() {
			var userInput = "";
			
			// name
            userInput += "&first=" + $('input[name=first]').val();
            userInput += "&last=" + $('input[name=last]').val();
            userInput += "&full=" + $('input[name=full]').val();

            // address
			userInput += "&a1=" + $('input[name=a1]').val();
			userInput += "&a2=" + $('input[name=a2]').val();
			userInput += "&city=" + $('input[name=city]').val();
			userInput += "&state=" + $('input[name=state]').val();
			userInput += "&postal=" + $('input[name=postal]').val();
            userInput += "&ctry=" + $('input[name=ctry]').val();
            userInput += "&lastline=" + $('input[name=lastline]').val();

            // birthdate and ssn
            userInput += "&bday=" + $('input[name=bday]').val();
            userInput += "&bmo=" + $('input[name=bmo]').val();
            userInput += "&byr=" + $('input[name=byr]').val();
            userInput += "&ss=" + $('input[name=ss]').val();

            // other
			userInput += "&phone=" + $('input[name=phone]').val();
			userInput += "&email=" + $('input[name=email]').val();
			userInput += "&mak=" + $('input[name=mak]').val();
			userInput += "&comp=" + $('input[name=comp]').val();
            userInput += "&ip=" + $('input[name=ip]').val();

            // free form
            userInput += "&ff=" + $('textarea[name=ff]').val();			

			return userInput;
		}

        function doVerify() {
			var xhttp = new XMLHttpRequest();
			var url = "http://personator.melissadata.net/v3/WEB/ContactVerify/doContactVerify?";
			url += "&id=" + encodeURIComponent($('input[name=id]').val());
            url += "&act=" + getActions().replace(/,\s*$/, "");
			url += "&cols=" + getColumnResponses().replace(/,\s*$/, "");
			url += "&opt=" + getOpt().replace(/,\s*$/, "");
			url += getUserInput();
            url += "&format=JSON";
			xhttp.open("GET", url, false);
			xhttp.send();
			console.log(url);
			var response = JSON.parse(xhttp.responseText);
			
			$('pre[name=restOutput]').text('\n\n' + url + '\n\n\n');
			$('pre[name=jsonOutput]').text(JSON.stringify(response, null, '\t'));
			$('.ui.menu').find('.item').tab('change tab', 'tab-name2');
        }

        function doClear() {
            $("input").each(function(index) {
                $(this).val('');
            })
        }

    </script>
</body>
</html>